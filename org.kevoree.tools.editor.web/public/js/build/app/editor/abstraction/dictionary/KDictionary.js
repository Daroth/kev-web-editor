define(["util/Util"],function(e){function n(n){this._entity=n,this._attrs=[],this._values=[];var r=n.getEditor().getModel().findTypeDefinitionsByID(n.getType()).getDictionaryType();if(r!=null&&r!=undefined){var i=r.getAttributes();for(var s=0;s<i.size();s++){var o=i.get(s),u=o.getDatatype()||"",a=require("factory/CFactory").getInstance(),f=a.newAttribute(this);f.setName(o.getName());if(u.substr(0,t.length)==t){var l=u.substr(t.length,u.length);f.setEnum(l.split(","))}f.setFragmentDependant(e.parseBoolean(o.getFragmentDependant())),f.setOptional(e.parseBoolean(o.getOptional())),this.addAttribute(f),f.getFragmentDependant()||this.addValue(a.newValue(f))}}}var t="enum=";return n.prototype.getEntity=function(){return this._entity},n.prototype.getAttributes=function(){return this._attrs},n.prototype.getValues=function(){return this._values},n.prototype.getValue=function(e,t){for(var n=0;n<this._values.length;n++)if(t!=undefined&&t!=null){if(this._values[n].getAttribute().getName()==e&&this._values[n].getTargetNode()&&this._values[n].getTargetNode().getName()==t)return this._values[n]}else if(this._values[n].getAttribute().getName()==e)return this._values[n];return null},n.prototype.getAttribute=function(e){for(var t=0;t<this._attrs.length;t++)if(this._attrs[t].getName()==e)return this._attrs[t];return null},n.prototype.addAttribute=function(e){this._attrs.push(e)},n.prototype.addValue=function(e){var t=this._values.indexOf(e);if(t==-1){if(e.getAttribute().getFragmentDependant()){var n=this.getValue(e.getAttribute().getName(),e.getTargetNode().getName());n?n.setValue(e.getValue()):this._values.push(e)}else{var n=this.getValue(e.getAttribute().getName());n?n.setValue(e.getValue()):this._values.push(e)}this._entity.getEditor().update(this)}},n.prototype.removeValue=function(e){var t=this._values.indexOf(e);t!=-1&&(this._values.splice(t,1),this._entity.getEditor().update(this))},n.prototype.accept=function(e){e.visitDictionary(this)},n});